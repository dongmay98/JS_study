<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="main.css">
  <script src="https://code.jquery.com/jquery-3.6.3.min.js"
    integrity="sha256-pvPw+upLPUjgMXY0G+8O0xUf+/Im1MZjXxxgOcBQBXU=" crossorigin="anonymous"></script>
    <link rel="shortcut icon" href="#">
</head>

<body>
  <div class="container">
    <div class="row">

      <!-- <div class="col-sm-4">
          <img src="https://via.placeholder.com/600" class="w-100">
          <h5>Card title</h5>
          <p>가격 : 70000</p>
        </div> -->

    </div>
  </div>
  <div class="container">
    <button class="btn btn-danger" id="more">더보기</button>
  </div>

  <div class="container my-3">
    <button class="btn btn-danger" id="price">가격순 정렬</button>
  </div>

  <div class="container my-3">
    <button class="btn btn-danger" id="da">상품명 다나가 정렬</button>
  </div>

  <div class="container my-3">
    <button class="btn btn-danger" id="6un">6만원 이하 상품 보기</button>
  </div>

  <script>

    function 카드만들기(data) {
      data.forEach(function (a, i) {
        var 템플릿 =
          `<div class="col-sm-4">
              <img src="https://via.placeholder.com/600" class="w-100">
              <h5>${data[i].title}</h5>
              <p>${data[i].price}</p>
            </div>`;
        $('.row').append(템플릿)
      });
    }

    var count = 0;
    $('#more').on('click', function () {
      count += 1;
      if (count == 1) {     ///버튼 한번 눌렀을 때
        $.get('https://codingapple1.github.io/js/more1.json')
          .done(function (data) {
            카드만들기(data);

          })
      } else if (count == 2) {   /// 버튼 두번 누를때
        $.get('https://codingapple1.github.io/js/more2.json')
          .done(function (data) {

            카드만들기(data);
          })
      }
    })






  </script>



  <script>

    //card-body
    var products = [
      { id: 0, price: 70000, title: 'Blossom Dress' },
      { id: 1, price: 50000, title: 'Springfield Shirt' },
      { id: 2, price: 60000, title: 'Black Monastery' }
    ];

    $('#price').click(function () { // 가격순 정렬
      products.sort(function (a, b) {
        return a.price - b.price
      });

      $('.row').html('');

      products.forEach((a, i) => {
        var 템플릿 =
          `<div class="col-sm-4">
      <img src="https://via.placeholder.com/600" class="w-100">
      <h5>${a.title}</h5>
      <p>${products[i].price}</p>
    </div>`;
        $('.row').append(템플릿)
      })

    });



    products.forEach((a, i) => {    // 처음 보여주는 카트바디 화면 , 구매버튼
      var 템플릿 =
        `<div class="col-sm-4">
      <img src="https://via.placeholder.com/600" class="w-100">
      <h5>${a.title}</h5>
      <p>${products[i].price}</p>
      <button class="buy">구매</button>
    </div>`
        ;
      $('.row').append(템플릿)
    });

    $('.buy').click(function(e){        //   구매버튼 클릭시 장바구니
      var title = $(e.target).siblings('h5').text();
      if(localStorage.getItem('cart') != null){
        var 꺼낸거 = JSON.parse(localStorage.cart);
        꺼낸거.push(title);
        localStorage.setItem('cart',JSON.stringify(꺼낸거));
      }else{
        localStorage.setItem('cart',JSON.stringify([title]))
      }
      
    })






    $('#da').click(function () {    // 다나가 순 정렬
      products.sort(function (a, b) {
        if (a.title > b.title)
          return -1;
      });

      $('.row').html('');
      products.forEach((a, i) => {
        var 템플릿 =
          `<div class="col-sm-4">
      <img src="https://via.placeholder.com/600" class="w-100">
      <h5>${a.title}</h5>
      <p>${products[i].price}</p>
    </div>`
          ;
        $('.row').append(템플릿)
      })
    });


    $('#6un').click(function () {       // 6만원 이하 정렬
      var newProduct = products.filter(function (a) {
        return a.price <= 60000
        console.log(newProduct);
      });

      //   $('.row').html('');
      //   products.forEach((a, i) => {
      //     var 템플릿 =
      //       `<div class="col-sm-4">
      //     <img src="https://via.placeholder.com/600" class="w-100">
      //     <h5>${a.title}</h5>
      //     <p>${products[i].price}</p>
      //   </div>`;
      //     $('.row').append(템플릿)
      //   })
    })

  </script>

  <script src="detail.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>

</body>

</html>